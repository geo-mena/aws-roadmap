---
title: AWS CLI Commands
description: Essential AWS CLI commands for managing EC2 instances and resources.
---

## Creating Resources

### Create Keypair

```bash
# Create keypair
aws ec2 create-key-pair \
  --key-name my-keypair \
  --query 'KeyMaterial' \
  --output text > my-keypair.pem

# Set proper permissions
chmod 400 my-keypair.pem
```

<Callout type="warn">
Always adjust permissions after creating a keypair. SSH will reject files with overly permissive settings.
</Callout>

### Create Security Group

```bash
# Create security group
aws ec2 create-security-group \
  --group-name web-server-sg \
  --description "Allow HTTP and SSH" \
  --vpc-id vpc-xxxxxx

# Add rules to security group
aws ec2 authorize-security-group-ingress \
  --group-id sg-xxxxx \
  --protocol tcp \
  --port 22 \
  --cidr 157.100.121.171/32  # Your specific IP
```

### Launch Instance

```bash
# Launch instance
aws ec2 run-instances \
  --image-id ami-0da00c97ce64145f1 \
  --instance-type t3.micro \
  --key-name my-keypair \
  --security-group-ids sg-xxxxx \
  --user-data file://userdata.sh \
  --tag-specifications 'ResourceType=instance,Tags=[{Key=Name,Value=WebServer-01}]'
```

### Allocate Elastic IP

```bash
# Allocate Elastic IP
aws ec2 allocate-address
```

## Querying Resources

### Pre-flight Check

```bash
# Verify identity (pre-flight)
aws sts get-caller-identity
```

### List VPCs

```bash
# Find default VPC
aws ec2 describe-vpcs \
  --query 'Vpcs[?IsDefault==`true`].VpcId' \
  --output text
```

### Find Latest AMI

```bash
# Find most recent AMI
aws ec2 describe-images \
  --owners amazon \
  --filters "Name=name,Values=al2023-ami-2023*" \
            "Name=architecture,Values=x86_64" \
  --query 'sort_by(Images, &CreationDate)[-1].ImageId' \
  --output text
```

### View Instance State

```bash
# View instance state
aws ec2 describe-instances \
  --instance-ids i-xxxxx \
  --query 'Reservations[0].Instances[0].[State.Name,PublicIpAddress]' \
  --output table
```

### Detailed Status Checks

```bash
# Detailed status checks
aws ec2 describe-instance-status \
  --instance-ids i-xxxxx
```

### View Security Group

```bash
# View applied security group
aws ec2 describe-security-groups \
  --group-ids sg-xxxxx
```

### View EBS Volumes

```bash
# View EBS volumes
aws ec2 describe-volumes \
  --volume-ids vol-xxxxx
```

### Console Output

Useful for debugging boot issues:

```bash
# Console output (debugging)
aws ec2 get-console-output \
  --instance-id i-xxxxx \
  --output text > console-output.txt
```

### List Elastic IPs

```bash
# List Elastic IPs
aws ec2 describe-addresses
```

## Modifying Resources

### Modify Instance Attribute

```bash
# Modify instance attribute
aws ec2 modify-instance-attribute \
  --instance-id i-xxxxx \
  --instance-type t3.small
```

### Change DeleteOnTermination

```bash
# Change DeleteOnTermination for volume
aws ec2 modify-instance-attribute \
  --instance-id i-xxxxx \
  --block-device-mappings DeviceName=/dev/xvda,Ebs={DeleteOnTermination=false}
```

## Deleting Resources

### Terminate Instance

```bash
# Terminate instance
aws ec2 terminate-instances \
  --instance-ids i-xxxxx
```

### Delete Security Group

```bash
# Delete security group
aws ec2 delete-security-group \
  --group-id sg-xxxxx
```

### Release Elastic IP

```bash
# Release Elastic IP
aws ec2 release-address \
  --allocation-id eipalloc-xxxxx
```

### Delete Keypair

```bash
# Delete keypair
aws ec2 delete-key-pair \
  --key-name my-keypair
```
